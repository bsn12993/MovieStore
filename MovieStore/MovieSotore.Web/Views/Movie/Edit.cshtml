@model MovieStore.Web.Models.Movie
@{
    ViewBag.Title = "Edit";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<link href="~/Content/bootstrap.css" rel="stylesheet" />
<link href="~/Content/bootstrap-datepicker.css" rel="stylesheet" />

<h2>Edit</h2>

<div class="row">
    <div class="col-lg-12">
        @using (Html.BeginForm("EditMovie", "Movie", FormMethod.Post,new { id="form_edit"}))
        {
            <div class="form-group">
                @Html.HiddenFor(m => m.Id)
            </div>
            <div class="form-group">
                @Html.TextBoxFor(m => m.Title)
            </div>
            <div class="form-group">
                @Html.TextBoxFor(m => m.ReleaseDate,new { @class= "form-control, datepicker" })
            </div>
            <div class="form-group">
                @Html.TextBoxFor(m => m.Director)
            </div>
            <div class="form-group">
                <input type="submit" value="Edit"/>
            </div>
        }
    </div>
</div>

@section scripts{
    <script src="~/Scripts/jquery-1.10.2.js"></script>
    <script src="~/Scripts/bootstrap.js"></script>
    <script src="~/Scripts/bootstrap-datepicker.js"></script>
    <script>
        $(function () {
            $("#@Html.IdFor(m=>m.ReleaseDate)").datepicker({
                format: 'yyyy/mm/dd',
                startDate: '-3d'
            });
            $("#@Html.IdFor(m=>m.ReleaseDate)").val("");
        });
    </script>
}
@*@section scripts{
    <script>
        $(function () {
            $("#form_edit").on('submit', function (evt) {
                debugger;
                evt.preventDefault();
                var form = $(this);
                var data = form.serialize();
                var url = form.attr("action");
                $.ajax({
                    url: "http://localhost:30712/api/movie",
                    contentType: "application/json",
                    method: "PUT",
                    data: JSON.stringify(data),
                    success: function (data) {
                        alert("bien");
                    },
                    error: function (data) {
                        alert("mal");
                    }
                })
            });
        });
    </script>    
}*@

